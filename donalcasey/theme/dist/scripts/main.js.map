{"version":3,"sources":["main.js"],"names":["$","jQuery","globals","require","animation","module","exports","utils","debug","tallest","equalHeights","ele","console","log","each","index","val","outerHeight","scrollTo","target","stop","animate","scrollTop","offset","top","ajaxStart","container","css","spinner","show","ajaxStop","hide","imagesLoaded","$imgs","document","find","length","Deferred","resolve","promise","dfds","dfd","push","img","Image","onload","onerror","src","when","apply","getItem","ID","self","promo","getJSON","dataPathPromos","json","textStatus","promos","isNear","$ele","distance","event","left","right","width","bottom","height","x","pageX","y","pageY","validation","isNotBlank","isMinCharacters","getQueryString","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","init","on"],"mappings":"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","file":"main.js","sourcesContent":["/* modules */\nconst $ = jQuery;\nvar globals = require(\"./common/globals.js\");\nvar animation = require(\"./common/animation.js\");\n\nmodule.exports = (function() {\n  $(function($) {\n    var utils = {\n      debug: true,\n      tallest: 0,\n      equalHeights: function(ele) {\n        if (this.debug) {\n          console.log(\"CP.utils.equalHeights();\");\n        }\n        utils.tallest = 0;\n        $.each(ele, function(index, val) {\n          if ($(this).outerHeight() > utils.tallest)\n            utils.tallest = $(this).outerHeight();\n          $(this).outerHeight(utils.tallest);\n        });\n\n        ele.outerHeight(utils.tallest);\n      },\n      scrollTo: function(target) {\n        if (this.debug) {\n          console.log(\"CP.utils.ScrollTo\");\n        }\n        $(\"html, body\")\n          .stop()\n          .animate(\n            {\n              scrollTop: $(target).offset().top\n            },\n            1500,\n            \"easeInOutExpo\"\n          );\n      },\n      ajaxStart: function(container) {\n        if (this.debug) {\n          console.log(\"CP.utils.ajaxStart(\" + container + \")\");\n        }\n        //let spinner = svgSpinnerOBJ;\n        $.ajaxStart(function(container) {\n          // animation();\n          container.css(\"opacity\", \"0.5\");\n          spinner.show(\"fast\");\n        });\n        $.ajaxStop(function(container) {\n          // animation();\n          container.css(\"opacity\", \"1\");\n          spinner.hide(\"fast\");\n        });\n      },\n      imagesLoaded: function() {\n        if (this.debug) {\n          console.log(\"CP.utils.imagesLoaded\");\n        }\n        // Fn to allow an event to fire after all images are loaded\n\n        // get all the images (excluding those with no src attribute)\n        var $imgs = $(document).find('img[src!=\"\"]');\n        // if there's no images, just return an already resolved promise\n        if (!$imgs.length) {\n          return $.Deferred()\n            .resolve()\n            .promise();\n        }\n\n        // for each image, add a deferred object to the array which resolves when the image is loaded (or if loading fails)\n        var dfds = [];\n        $imgs.each(function() {\n          var dfd = $.Deferred();\n          dfds.push(dfd);\n          var img = new Image();\n          img.onload = function() {\n            dfd.resolve();\n          };\n          img.onerror = function() {\n            dfd.resolve();\n          };\n          img.src = this.src;\n        });\n\n        // return a master promise object which will resolve when all the deferred objects have resolved\n        // IE - when all the images are loaded\n        return $.when.apply($, dfds);\n      },\n      getItem: function(ID) {\n        //Leaving for example, for service data\n        if (this.debug) {\n          console.log(\"CP.utils.getPromoByID(\" + ID + \")\");\n        }\n        var self = this;\n        var promo;\n\n        //abstract method of selecting a promo by ID\n        $.getJSON(dataPathPromos, function(json, textStatus) {\n          promo = json.promos[ID];\n        });\n        return promo;\n      },\n      isNear: function($ele, distance, event) {\n        // for chat share print module\n        if (this.debug) {\n          //console.log('CP.utils.isNear('+ $ele +' '+ distance +' '+ event +')');\n        }\n\n        var left = $ele.offset().left - distance,\n          top = $ele.offset().top - distance,\n          right = left + $ele.width() + 2 * distance,\n          bottom = top + $ele.height() + 2 * distance,\n          x = event.pageX,\n          y = event.pageY;\n\n        return x > left && x < right && y > top && y < bottom;\n      },\n      validation: {\n        debug: true,\n        isNotBlank: function(val) {\n          if (this.debug) {\n            console.log(\"CP.utils.isNotBlank(\" + val + \")\");\n          }\n          if (val.length) {\n            return true;\n          } else {\n            return false;\n          }\n        },\n        isMinCharacters: function() {\n          if (this.debug) {\n            console.log(\"CP.utils.isMinCharacters()\");\n          }\n        }\n      },\n      getQueryString: function(name, url) {\n        if (this.debug) {\n          console.log(\"CP.utils()\");\n        }\n\n        if (!url) {\n          url = window.location.href;\n        }\n\n        name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n        var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n          results = regex.exec(url);\n        if (!results) return null;\n        if (!results[2]) return \"\";\n\n        return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n      }\n    };\n    // end utils\n    //are we good?\n    if ($(\"body\").length) {\n      globals.init($);\n      $(window).on(\"load\", function() {\n\n      });\n\n      //TODO: ADD LOGIC HERE\n    }\n    \n    animation.init($);\n\n  });\n})();\n\n"]}